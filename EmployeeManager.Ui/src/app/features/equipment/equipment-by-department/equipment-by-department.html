<div class="equipment-container">
  <h3>–û–±–ª–∞–¥–Ω–∞–Ω–Ω—è</h3>
  <div class="controls">
    <input
      type="text"
      placeholder="–ü–æ—à—É–∫ –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è"
      (input)="onSearch($any($event.target).value)"
    />
    <select (change)="onStatusChange($event.target.value)">
      <option value="all">–í—Å—ñ —Å—Ç–∞—Ç—É—Å–∏</option>
      <option value="used">–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è</option>
      <option value="not_used">–ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è</option>
      <option value="broken">–ü–æ—à–∫–æ–¥–∂–µ–Ω–æ</option>
    </select>
    <div class="pagination">
      <button (click)="changePage(page() - 1)" [disabled]="page() <= 1">–ü–æ–ø–µ—Ä–µ–¥–Ω—è</button>
      <span>–°—Ç–æ—Ä—ñ–Ω–∫–∞ {{ page() }} / {{ Math.ceil((total() || 0) / pageSize()) || 1 }}</span>
      <button (click)="changePage(page() + 1)" [disabled]="page() * pageSize() >= (total() || 0)">
        –ù–∞—Å—Ç—É–ø–Ω–∞
      </button>
    </div>
  </div>

  @if (isLoading()) {
  <app-skeleton-loader [count]="5"></app-skeleton-loader>
  } @else if (error()) {
  <p class="text-danger">{{ error() }}</p>
  } @else if (filtered() && filtered()!.length > 0) {

  <ul class="equipment-list">
    @for (eq of filtered(); track eq.id) {
    <li class="equipment-item" (click)="onEquipmentSelected(eq.id)">
      <div class="equipment-info">
        <strong>{{ eq.name }}</strong>
        <div>üî¢ {{ eq.serialNumber }}</div>
        <div class="category">{{ eq.categoryName }}</div>
        <div>
          –°—Ç–∞—Ç—É—Å:
          {{ eq.status === 'Used' ? '–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è' : eq.status === 'NotUsed' ? '–ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è' : '–ü–æ—à–∫–æ–¥–∂–µ–Ω–æ' }}
        </div>
      </div>
      <button (click)="onDelete(eq.id); $event.stopPropagation()" class="btn btn-danger btn-sm">
        –í–∏–¥–∞–ª–∏—Ç–∏
      </button>
    </li>
    }
  </ul>

  } @else {
  <p class="empty-list">–û–±–ª–∞–¥–Ω–∞–Ω–Ω—è –≤ —Ü—å–æ–º—É –≤—ñ–¥–¥—ñ–ª—ñ –Ω–µ–º–∞—î</p>
  }
</div>
